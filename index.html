<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="今夕何年丶">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="今夕何年丶">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="今夕何年丶">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>今夕何年丶</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">今夕何年丶</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/05/jenkins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wts">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今夕何年丶">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/05/jenkins/" itemprop="url">Jenkins TestReadMeMd</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-05T10:44:22+08:00">
                2018-08-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Official-Jenkins-Docker-image"><a href="#Official-Jenkins-Docker-image" class="headerlink" title="Official Jenkins Docker image"></a>Official Jenkins Docker image</h1><p>The Jenkins Continuous Integration and Delivery server <a href="https://hub.docker.com/r/jenkins/jenkins" target="_blank" rel="noopener">available on Docker Hub</a>.</p>
<p>This is a fully functional Jenkins server.<br><a href="https://jenkins.io/" target="_blank" rel="noopener">https://jenkins.io/</a>.</p>
<p><img src="https://jenkins.io/sites/default/files/jenkins_logo.png"></p>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts</span><br></pre></td></tr></table></figure>
<p>NOTE: read below the <em>build executors</em> part for the role of the <code>50000</code> port mapping.</p>
<p>This will store the workspace in /var/jenkins_home. All Jenkins data lives in there - including plugins and configuration.<br>You will probably want to make that an explicit volume so you can manage it and attach to another container for upgrades :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8080:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts</span><br></pre></td></tr></table></figure>
<p>this will automatically create a ‘jenkins_home’ <a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">docker volume</a> on the host machine, that will survive the container stop/restart/deletion.</p>
<p>NOTE: Avoid using a <a href="https://docs.docker.com/storage/bind-mounts/" target="_blank" rel="noopener">bind mount</a> from a folder on the host machine into <code>/var/jenkins_home</code>, as this might result in file permission issues (the user used inside the container might not have rights to the folder on the host machine). If you <em>really</em> need to bind mount jenkins_home, ensure that the directory on the host is accessible by the jenkins user inside the container (jenkins user - uid 1000) or use <code>-u some_other_user</code> parameter with <code>docker run</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts</span><br></pre></td></tr></table></figure>
<p>this will run Jenkins in detached mode with port forwarding and volume added. You can access logs with command ‘docker logs CONTAINER_ID’ in order to check first login token. ID of container will be returned from output of command above. </p>
<h2 id="Backing-up-data"><a href="#Backing-up-data" class="headerlink" title="Backing up data"></a>Backing up data</h2><p>If you bind mount in a volume - you can simply back up that directory<br>(which is jenkins_home) at any time.</p>
<p>This is highly recommended. Treat the jenkins_home directory as you would a database - in Docker you would generally put a database on a volume.</p>
<p>If your volume is inside a container - you can use <figure class="highlight docker"><figcaption><span>cp $ID:/var/jenkins_home``` command to extract the data, or other options to find where the volume data is.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Note that some symlinks on some OSes may be converted to copies (this can confuse jenkins with lastStableBuild links etc)</span><br><span class="line"></span><br><span class="line">For more info check Docker docs section on [Managing data in containers](https://docs.docker.com/engine/tutorials/dockervolumes/)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Setting the number of executors</span></span><br><span class="line"></span><br><span class="line">You can specify and set the number of executors of your Jenkins master instance using a groovy script. By default its set to <span class="number">2</span> executors, but you can extend the image and change it to your desired number of executors :</span><br><span class="line"></span><br><span class="line">`executors.groovy`</span><br></pre></td></tr></table></figure></p>
<p>import jenkins.model.*<br>Jenkins.instance.setNumExecutors(5)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">and `Dockerfile`</span><br></pre></td></tr></table></figure></p>
<p>FROM jenkins/jenkins:lts<br>COPY executors.groovy /usr/share/jenkins/ref/init.groovy.d/executors.groovy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"># Attaching build executors</span><br><span class="line"></span><br><span class="line">You can run builds on the master out of the box.</span><br><span class="line"></span><br><span class="line">But if you want to attach build slave servers **through JNLP (Java Web Start)**: make sure you map the port: ```-p 50000:50000``` - which will be used when you connect a slave agent.</span><br><span class="line"></span><br><span class="line">If you are only using [SSH slaves](https://wiki.jenkins-ci.org/display/JENKINS/SSH+Slaves+plugin), then you do **NOT** need to put that port mapping.</span><br><span class="line"></span><br><span class="line"># Passing JVM parameters</span><br><span class="line"></span><br><span class="line">You might need to customize the JVM running Jenkins, typically to pass system properties or tweak heap memory settings. Use JAVA_OPTS environment</span><br><span class="line">variable for this purpose :</span><br></pre></td></tr></table></figure></p>
<p>docker run –name myjenkins -p 8080:8080 -p 50000:50000 –env JAVA_OPTS=-Dhudson.footerURL=<a href="http://mycompany.com" target="_blank" rel="noopener">http://mycompany.com</a> jenkins/jenkins:lts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Configuring logging</span><br><span class="line"></span><br><span class="line">Jenkins logging can be configured through a properties file and `java.util.logging.config.file` Java property.</span><br><span class="line">For example:</span><br></pre></td></tr></table></figure></p>
<p>mkdir data<br>cat &gt; data/log.properties &lt;&lt;EOF<br>handlers=java.util.logging.ConsoleHandler<br>jenkins.level=FINEST<br>java.util.logging.ConsoleHandler.level=FINEST<br>EOF<br>docker run –name myjenkins -p 8080:8080 -p 50000:50000 –env JAVA_OPTS=”-Djava.util.logging.config.file=/var/jenkins_home/log.properties” -v <code>pwd</code>/data:/var/jenkins_home jenkins/jenkins:lts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Configuring reverse proxy</span><br><span class="line">If you want to install Jenkins behind a reverse proxy with prefix, example: mysite.com/jenkins, you need to add environment variable `JENKINS_OPTS=&quot;--prefix=/jenkins&quot;` and then follow the below procedures to configure your reverse proxy, which will depend if you have Apache or Nginx:</span><br><span class="line">- [Apache](https://wiki.jenkins-ci.org/display/JENKINS/Running+Jenkins+behind+Apache)</span><br><span class="line">- [Nginx](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+behind+an+NGinX+reverse+proxy)</span><br><span class="line"></span><br><span class="line"># Passing Jenkins launcher parameters</span><br><span class="line"></span><br><span class="line">Argument you pass to docker running the jenkins image are passed to jenkins launcher, so you can run for sample :</span><br></pre></td></tr></table></figure></p>
<p>docker run jenkins/jenkins:lts –version<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This will dump Jenkins version, just like when you run jenkins as an executable war.</span><br><span class="line"></span><br><span class="line">You also can define jenkins arguments as `JENKINS_OPTS`. This is usefull to define a set of arguments to pass to jenkins launcher as you</span><br><span class="line">define a derived jenkins image based on the official one with some customized settings. The following sample Dockerfile uses this option</span><br><span class="line">to force use of HTTPS with a certificate included in the image</span><br></pre></td></tr></table></figure></p>
<p>FROM jenkins/jenkins:lts</p>
<p>COPY https.pem /var/lib/jenkins/cert<br>COPY https.key /var/lib/jenkins/pk<br>ENV JENKINS_OPTS –httpPort=-1 –httpsPort=8083 –httpsCertificate=/var/lib/jenkins/cert –httpsPrivateKey=/var/lib/jenkins/pk<br>EXPOSE 8083<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can also change the default slave agent port for jenkins by defining `JENKINS_SLAVE_AGENT_PORT` in a sample Dockerfile.</span><br></pre></td></tr></table></figure></p>
<p>FROM jenkins/jenkins:lts<br>ENV JENKINS_SLAVE_AGENT_PORT 50001<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">or as a parameter to docker,</span><br></pre></td></tr></table></figure></p>
<p>docker run –name myjenkins -p 8080:8080 -p 50001:50001 –env JENKINS_SLAVE_AGENT_PORT=50001 jenkins/jenkins:lts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Installing more tools</span><br><span class="line"></span><br><span class="line">You can run your container as root - and install via apt-get, install as part of build steps via jenkins tool installers, or you can create your own Dockerfile to customise, for example:</span><br></pre></td></tr></table></figure></p>
<p>FROM jenkins/jenkins:lts</p>
<h1 id="if-we-want-to-install-via-apt"><a href="#if-we-want-to-install-via-apt" class="headerlink" title="if we want to install via apt"></a>if we want to install via apt</h1><p>USER root<br>RUN apt-get update &amp;&amp; apt-get install -y ruby make more-thing-here</p>
<h1 id="drop-back-to-the-regular-jenkins-user-good-practice"><a href="#drop-back-to-the-regular-jenkins-user-good-practice" class="headerlink" title="drop back to the regular jenkins user - good practice"></a>drop back to the regular jenkins user - good practice</h1><p>USER jenkins<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">In such a derived image, you can customize your jenkins instance with hook scripts or additional plugins.</span><br><span class="line">For this purpose, use `/usr/share/jenkins/ref` as a place to define the default JENKINS_HOME content you</span><br><span class="line">wish the target installation to look like :</span><br></pre></td></tr></table></figure></p>
<p>FROM jenkins/jenkins:lts<br>COPY custom.groovy /usr/share/jenkins/ref/init.groovy.d/custom.groovy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Preinstalling plugins</span><br><span class="line"></span><br><span class="line">You can rely on the `install-plugins.sh` script to pass a set of plugins to download with their dependencies.</span><br><span class="line">This script will perform downloads from update centers, and internet access is required for the default update centers.</span><br><span class="line"></span><br><span class="line">### Setting update centers</span><br><span class="line"></span><br><span class="line">During the download, the script will use update centers defined by the following environment variables:</span><br><span class="line"></span><br><span class="line">* `JENKINS_UC` - Main update center.</span><br><span class="line">  This update center may offer plugin versions depending on the Jenkins LTS Core versions.</span><br><span class="line">  Default value: https://updates.jenkins.io</span><br><span class="line">* `JENKINS_UC_EXPERIMENTAL` - [Experimental Update Center](https://jenkins.io/blog/2013/09/23/experimental-plugins-update-center/).</span><br><span class="line">  This center offers Alpha and Beta versions of plugins.</span><br><span class="line">  Default value: https://updates.jenkins.io/experimental</span><br><span class="line">* `JENKINS_INCREMENTALS_REPO_MIRROR` -</span><br><span class="line">  Defines Maven mirror to be used to download plugins from the</span><br><span class="line">  [Incrementals repo](https://jenkins.io/blog/2018/05/15/incremental-deployment/).</span><br><span class="line">  Default value: https://repo.jenkins-ci.org/incrementals</span><br><span class="line"></span><br><span class="line">It is possible to override the environment variables in images.</span><br><span class="line"></span><br><span class="line">:exclamation: Note that changing this variables **will not** change the Update Center being used by Jenkins runtime.</span><br><span class="line"></span><br><span class="line">### Plugin version format</span><br><span class="line"></span><br><span class="line">Use plugin artifact ID, without `-plugin` extension, and append the version if needed separated by `:`.</span><br><span class="line">Dependencies that are already included in the Jenkins war will only be downloaded if their required version is newer than the one included.</span><br><span class="line"></span><br><span class="line">There are also custom version specifiers:</span><br><span class="line"></span><br><span class="line">* `latest` - download the latest version from the main update center.</span><br><span class="line">  For Jenkins LTS images</span><br><span class="line">  (example: `git:latest`)</span><br><span class="line">* `experimental` - download the latest version from the experimental update center defined by the `JENKINS_UC_EXPERIMENTAL` environment variable (example: `filesystem_scm:experimental`)</span><br><span class="line">* `incrementals;org.jenkins-ci.plugins.workflow;2.19-rc289.d09828a05a74`</span><br><span class="line">- download the plugin from the [Incrementals repo](https://jenkins.io/blog/2018/05/15/incremental-deployment/).</span><br><span class="line">  * For this option you need to specify `groupId` of the plugin.</span><br><span class="line">    Note that this value may change between plugin versions without notice.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Script usage</span><br><span class="line"></span><br><span class="line">You can run the script manually in Dockerfile:</span><br><span class="line"></span><br><span class="line">```Dockerfile</span><br><span class="line">FROM jenkins/jenkins:lts</span><br><span class="line">RUN /usr/local/bin/install-plugins.sh docker-slaves github-branch-source:1.8</span><br></pre></td></tr></table></figure></p>
<p>Furthermore it is possible to pass a file that contains this set of plugins (with or without line breaks).</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> jenkins/jenkins:lts</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> plugins.txt /usr/share/jenkins/ref/plugins.txt</span></span><br><span class="line"><span class="bash">RUN /usr/<span class="built_in">local</span>/bin/install-plugins.sh &lt; /usr/share/jenkins/ref/plugins.txt</span></span><br></pre></td></tr></table></figure>
<p>When jenkins container starts, it will check <code>JENKINS_HOME</code> has this reference content, and copy them<br>there if required. It will not override such files, so if you upgraded some plugins from UI they won’t<br>be reverted on next start.</p>
<p>In case you <em>do</em> want to override, append ‘.override’ to the name of the reference file. E.g. a file named<br><code>/usr/share/jenkins/ref/config.xml.override</code> will overwrite an existing <code>config.xml</code> file in JENKINS_HOME.</p>
<p>Also see <a href="https://issues.jenkins-ci.org/browse/JENKINS-24986" target="_blank" rel="noopener">JENKINS-24986</a></p>
<p>Here is an example to get the list of plugins from an existing server:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JENKINS_HOST=username:password@myhost.com:port</span><br><span class="line">curl -sSL &quot;http://$JENKINS_HOST/pluginManager/api/xml?depth=1&amp;xpath=/*/*/shortName|/*/*/version&amp;wrapper=plugins&quot; | perl -pe &apos;s/.*?&lt;shortName&gt;([\w-]+).*?&lt;version&gt;([^&lt;]+)()(&lt;\/\w+&gt;)+/\1 \2\n/g&apos;|sed &apos;s/ /:/&apos;</span><br></pre></td></tr></table></figure>
<p>Example Output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cucumber-testresult-plugin:0.8.2</span><br><span class="line">pam-auth:1.1</span><br><span class="line">matrix-project:1.4.1</span><br><span class="line">script-security:1.13</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>For 2.x-derived images, you may also want to</p>
<pre><code>RUN echo 2.0 &gt; /usr/share/jenkins/ref/jenkins.install.UpgradeWizard.state
</code></pre><p>to indicate that this Jenkins installation is fully configured.<br>Otherwise a banner will appear prompting the user to install additional plugins,<br>which may be inappropriate.</p>
<h1 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h1><p>All the data needed is in the /var/jenkins_home directory - so depending on how you manage that - depends on how you upgrade. Generally - you can copy it out - and then “docker pull” the image again - and you will have the latest LTS - you can then start up with -v pointing to that data (/var/jenkins_home) and everything will be as you left it.</p>
<p>As always - please ensure that you know how to drive docker - especially volume handling!</p>
<h2 id="Upgrading-plugins"><a href="#Upgrading-plugins" class="headerlink" title="Upgrading plugins"></a>Upgrading plugins</h2><p>By default, plugins will be upgraded if they haven’t been upgraded manually and if the version from the docker image is newer than the version in the container. Versions installed by the docker image are tracked through a marker file.</p>
<p>The default behaviour when upgrading from a docker image that didn’t write marker files is to leave existing plugins in place. If you want to upgrade existing plugins without marker you may run the docker image with <code>-e TRY_UPGRADE_IF_NO_MARKER=true</code>. Then plugins will be upgraded if the version provided by the docker image is newer.</p>
<h1 id="Building"><a href="#Building" class="headerlink" title="Building"></a>Building</h1><p>Build with the usual</p>
<pre><code>docker build -t jenkins/jenkins .
</code></pre><p>Tests are written using <a href="https://github.com/sstephenson/bats" target="_blank" rel="noopener">bats</a> under the <code>tests</code> dir</p>
<pre><code>DOCKERFILE=Dockerfile bats tests
DOCKERFILE=Dockerfile-alpine bats tests
</code></pre><p>Download the test helpers by updating the submodules</p>
<pre><code>git submodule update --init --recursive
</code></pre><p>Bats can be easily installed with <code>brew install bats</code> on OS X</p>
<h1 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h1><p>In order to debug the master, use the <code>-e DEBUG=true -p 5005:5005</code> when starting the container.<br>Jenkins will be suspended on the startup in such case,<br>and then it will be possible to attach a debugger from IDE to it.</p>
<h1 id="Questions"><a href="#Questions" class="headerlink" title="Questions?"></a>Questions?</h1><p>Jump on irc.freenode.net and the #jenkins room. Ask!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/04/okhttp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wts">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今夕何年丶">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/04/okhttp/" itemprop="url">OkHttp Description</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-04T21:02:27+08:00">
                2018-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="OkHttp"><a href="#OkHttp" class="headerlink" title="OkHttp"></a>OkHttp</h1><p>An HTTP &amp; HTTP/2 client for Android and Java applications. For more information see <a href="https://square.github.io/okhttp" target="_blank" rel="noopener">the website</a> and <a href="https://github.com/square/okhttp/wiki" target="_blank" rel="noopener">the wiki</a>.</p>
<h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><p>Download <a href="https://search.maven.org/remote_content?g=com.squareup.okhttp3&amp;a=okhttp&amp;v=LATEST" target="_blank" rel="noopener">the latest JAR</a> or grab via Maven:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>or Gradle:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.squareup.okhttp3:okhttp:3.11.0'</span></span><br></pre></td></tr></table></figure></p>
<p>Snapshots of the development version are available in <a href="https://oss.sonatype.org/content/repositories/snapshots/" target="_blank" rel="noopener">Sonatype’s <code>snapshots</code> repository</a>.</p>
<h2 id="MockWebServer"><a href="#MockWebServer" class="headerlink" title="MockWebServer"></a>MockWebServer</h2><p>A library for testing HTTP, HTTPS, and HTTP/2 clients.</p>
<p>MockWebServer coupling with OkHttp is essential for proper testing of HTTP/2 so that code can be shared.</p>
<h3 id="Download-1"><a href="#Download-1" class="headerlink" title="Download"></a>Download</h3><p>Download <a href="https://search.maven.org/remote_content?g=com.squareup.okhttp3&amp;a=mockwebserver&amp;v=LATEST" target="_blank" rel="noopener">the latest JAR</a> or grab via Maven:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mockwebserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>or Gradle:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testImplementation <span class="string">'com.squareup.okhttp3:mockwebserver:3.11.0'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="R8-ProGuard"><a href="#R8-ProGuard" class="headerlink" title="R8 / ProGuard"></a>R8 / ProGuard</h2><p>If you are using R8 or ProGuard add the options from<br><a href="https://github.com/square/okhttp/blob/master/okhttp/src/main/resources/META-INF/proguard/okhttp3.pro" target="_blank" rel="noopener">this file</a>.</p>
<p>You might also need rules for Okio which is a dependency of this library.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><pre><code>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/04/my-new-post/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wts">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今夕何年丶">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/04/my-new-post/" itemprop="url">my new post</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-04T18:12:35+08:00">
                2018-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="hello-test-new-my-post"><a href="#hello-test-new-my-post" class="headerlink" title="hello-test new my post"></a>hello-test new my post</h1><p>Just  begin with github~<br>test 1st commit~   come here as a moment via wts,an programming enginneer~<br>test branch~<br>test push~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/04/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wts">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今夕何年丶">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/04/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-04T17:30:03+08:00">
                2018-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wts</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wts</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
